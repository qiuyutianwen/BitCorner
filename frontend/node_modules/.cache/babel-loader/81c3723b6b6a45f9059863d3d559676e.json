{"ast":null,"code":"var _jsxFileName = \"/Users/qiuyutianwen/Documents/GitHub/BitCorner/frontend/src/pages/Bills.js\",\n    _s = $RefreshSig$();\n\nimport Reactm, { useState, useEffect } from 'react';\nimport { Jumbotron, Button, Row, Col, Form, Table, Card, InputGroup, FormControl, ListGroup, Modal } from 'react-bootstrap';\nimport { faTimes, faSearch, faUserFriends } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Application } from '../components/export';\nimport Bill from '../components/Bill';\nimport { updateToBill } from '../actions/billAction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Bills = () => {\n  _s();\n\n  const allUser = useSelector(state => state.auth ? state.auth.allUser : null);\n  const user = useSelector(state => state.auth ? state.auth.user : null);\n  const [editDisplay, setEditDisplay] = useState(\"none\");\n  const [payDisplay, setPayDisplay] = useState(\"none\");\n  const [users, setUsers] = useState(\"none\");\n  const [search, setSearch] = useState(\"\");\n  const [searchOutput, setSearchOutput] = useState([]);\n  const [show, setShow] = useState(false);\n  const [name, setName] = useState();\n  const [otherCurrency, setOtherCurrency] = useState(false);\n  const [editBill, setEditBill] = useState({\n    status: \"\",\n    amount: \"\"\n  });\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (allUser) setUsers(allUser);\n  }, [allUser]);\n\n  const onSubmit = () => {\n    console.log(\"submit bill!\", editBill);\n  };\n\n  const toggleEditDisplay = input => {\n    if (editDisplay === \"none\") {\n      setEditBill(input);\n      setEditDisplay(\"display\");\n    } else {\n      setEditDisplay(\"none\");\n    }\n  };\n\n  const togglePayDisplay = () => {\n    if (payDisplay === \"none\") {\n      setPayDisplay(\"display\");\n    } else {\n      setPayDisplay(\"none\");\n    }\n  };\n\n  const bills = [{\n    id: 1,\n    status: \"Cancelled\",\n    amount: 100\n  }, {\n    id: 2,\n    status: \"Paid\",\n    amount: 4321\n  }, {\n    id: 3,\n    status: \"Rejected\",\n    amount: 123\n  }, {\n    id: 4,\n    status: \"Waiting\",\n    amount: 342\n  }, {\n    id: 5,\n    status: \"Overdue\",\n    amount: 32\n  }]; // const allUser = [{id: 1, username: \"321@gmail.com\", nickname: \"chen\"},{id: 2, username: \"111@gmail.com\", nickname: \"lin\"},{id: 3, username: \"222@gmail.com\", nickname: \"liu\"},{id: 4, username: \"333@gmail.com\", nickname: \"zhang\"}]\n\n  const searchUser = name => {\n    console.log(\"search for\", name);\n    setSearch(name);\n    const afterUser = users.filter(a => a.username.includes(name) || a.nickname.includes(name));\n    let selectedUser = users.filter(a => a.username.includes(name));\n    selectedUser = selectedUser.filter(a => a.nickname !== user.nickname);\n    console.log(\"afterUser\", selectedUser);\n    setSearchOutput(selectedUser); // afterUser.map((item, index) => {\n    //     selectedUser.push (\n    //         <Card style={{ width: '18rem' }}>\n    //             <Card.Body>\n    //                 <Card.Title>Card Title</Card.Title>\n    //                 <Card.Subtitle className=\"mb-2 text-muted\">Card Subtitle</Card.Subtitle>\n    //                 <Card.Text>\n    //                 Some quick example text to build on the card title and make up the bulk of\n    //                 the card's content.\n    //                 </Card.Text>\n    //                 <Card.Link href=\"#\">Card Link</Card.Link>\n    //                 <Card.Link href=\"#\">Another Link</Card.Link>\n    //             </Card.Body>\n    //         </Card>\n    //     )\n    // })\n  };\n\n  const statusList = ['Cancelled', 'Paid', 'Reject', 'Waiting', 'Overdue'];\n  let statusOption = statusList.map((item, index) => {\n    return /*#__PURE__*/_jsxDEV(\"option\", {\n      value: item,\n      children: item\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 16\n    }, this);\n  });\n  const currencies = ['EUR', \"USD\", 'GBP', 'INR', 'RMB'];\n  let currencyOption = currencies.map((item, index) => {\n    return /*#__PURE__*/_jsxDEV(\"option\", {\n      value: item,\n      children: item\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 4\n    }, this);\n  });\n\n  const handleChange = event => {\n    const target = event.target;\n    const value = target.value;\n    const targetname = target.name;\n\n    if (targetname === \"currency\") {\n      console.log(\"inside\");\n      editBill[\"amount\"] = \"\";\n      setOtherCurrency(true);\n    }\n\n    setEditBill({ ...editBill,\n      [targetname]: value\n    });\n  };\n\n  const detail = input => {\n    console.log(\"getting detail of user\", input);\n    setName(input);\n    setShow(true);\n  };\n\n  const reject = async id => {\n    console.log(\"reject\");\n    alert(\"You rejected a bill sent from xxx\"); // setEditBill({...editBill, id, status: \"Rejected\"})\n    // await dispatch(updateToBill(editBill))\n  };\n\n  const pay = async id => {\n    console.log(\"pay\");\n    togglePayDisplay(); // setEditBill({...editBill, id, status: \"Paid\"})  \n    // await dispatch(updateToBill(editBill))\n  };\n\n  const edit = async () => {\n    console.log(\"edit\", editBill);\n    await dispatch(updateToBill(editBill));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"60%\",\n        margin: \"0 auto\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: \"100px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"formBasicDescription\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Send Bill\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              children: [/*#__PURE__*/_jsxDEV(InputGroup, {\n                className: \"col-mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(InputGroup.Prepend, {\n                  children: /*#__PURE__*/_jsxDEV(InputGroup.Text, {\n                    children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                      icon: faSearch\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 154,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                  placeholder: \"Search\",\n                  \"aria-label\": \"Search\",\n                  \"aria-describedby\": \"basic-addon2\",\n                  value: search,\n                  onChange: e => searchUser(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n                style: {\n                  zIndex: 10\n                },\n                children: [console.log(\"before search selectedUser\", search, searchOutput), search && searchOutput ? searchOutput.map((item, index) => {\n                  if (item.nickname) {\n                    return /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                      className: \"search-result\",\n                      action: true,\n                      onClick: () => detail(item.nickname),\n                      children: item.nickname ? item.nickname : item.username\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 29\n                    }, this);\n                  }\n                }) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Bills\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"#\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Operation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: bills.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.amount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 37\n                }, this), item.status !== \"Cancelled\" && item.status !== \"Paid\" && item.status !== \"Rejected\" ? /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"link\",\n                    onClick: () => toggleEditDisplay(item),\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 37\n                }, this) : /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Cannot Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 37\n                }, this), item.status !== \"Paid\" && item.status !== \"Rejected\" && item.status !== \"Cancelled\" && item.status !== \"Overdue\" ? /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"link\",\n                    onClick: () => reject(item.id),\n                    children: \"Reject\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"link\",\n                    onClick: () => pay(item.id),\n                    children: \"Pay\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 37\n                }, this) : /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"None Action\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 36\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: show,\n        onHide: handleClose,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Send Bills\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: /*#__PURE__*/_jsxDEV(Bill, {\n            value: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Application.Base, {\n        display: editDisplay,\n        children: [/*#__PURE__*/_jsxDEV(Application.Close, {\n          toggleDisplay: toggleEditDisplay,\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faTimes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 70\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: \"Edit Bill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 17\n        }, this), console.log(\"editBill\", editBill), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"status\",\n            children: \"Bill Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"status\",\n            id: \"status\",\n            value: editBill.status,\n            className: \"form-control\",\n            onChange: handleChange,\n            children: statusOption\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"formBasicDate\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Bill Amount: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: editBill.amount,\n            onChange: e => setEditBill({ ...editBill,\n              amount: e.target.value\n            }),\n            type: \"text\",\n            placeholder: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: edit,\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Application.Base, {\n        display: payDisplay,\n        children: [/*#__PURE__*/_jsxDEV(Application.Close, {\n          toggleDisplay: togglePayDisplay,\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faTimes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 69\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: \"Pay a bill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"currency\",\n            children: \"Bill Currency\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"currency\",\n            id: \"currency\",\n            value: editBill.currency,\n            className: \"form-control\",\n            onChange: handleChange,\n            children: currencyOption\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"formBasicDate\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Bill Amount: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: editBill.amount,\n            onChange: e => setEditBill({ ...editBill,\n              amount: e.target.value\n            }),\n            type: \"text\",\n            placeholder: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 21\n        }, this), otherCurrency ? /*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Fee: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 38\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 76\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: edit,\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(Bills, \"b3WGUA+yUNAeQIR2MzUJ4mQh92s=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = Bills;\nexport default Bills;\n\nvar _c;\n\n$RefreshReg$(_c, \"Bills\");","map":{"version":3,"sources":["/Users/qiuyutianwen/Documents/GitHub/BitCorner/frontend/src/pages/Bills.js"],"names":["Reactm","useState","useEffect","Jumbotron","Button","Row","Col","Form","Table","Card","InputGroup","FormControl","ListGroup","Modal","faTimes","faSearch","faUserFriends","FontAwesomeIcon","useDispatch","useSelector","Application","Bill","updateToBill","Bills","allUser","state","auth","user","editDisplay","setEditDisplay","payDisplay","setPayDisplay","users","setUsers","search","setSearch","searchOutput","setSearchOutput","show","setShow","name","setName","otherCurrency","setOtherCurrency","editBill","setEditBill","status","amount","handleClose","handleShow","dispatch","onSubmit","console","log","toggleEditDisplay","input","togglePayDisplay","bills","id","searchUser","afterUser","filter","a","username","includes","nickname","selectedUser","statusList","statusOption","map","item","index","currencies","currencyOption","handleChange","event","target","value","targetname","detail","reject","alert","pay","edit","width","margin","height","e","zIndex","currency"],"mappings":"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","sourcesContent":["import Reactm, {useState, useEffect} from 'react'\nimport { Jumbotron, Button, Row, Col, Form, Table, Card, InputGroup, FormControl, ListGroup, Modal } from 'react-bootstrap';\nimport { faTimes, faSearch, faUserFriends} from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Application } from '../components/export';\nimport Bill from '../components/Bill';\nimport { updateToBill } from '../actions/billAction';\n\nconst Bills = () => {\n    const allUser = useSelector((state) => state.auth ? state.auth.allUser : null)\n    const user = useSelector((state) => state.auth ? state.auth.user : null)\n    const [editDisplay, setEditDisplay] = useState(\"none\");\n    const [payDisplay, setPayDisplay] = useState(\"none\");\n    const [users, setUsers] = useState(\"none\");\n    const [search, setSearch] = useState(\"\");\n    const [searchOutput, setSearchOutput] = useState([]);\n    const [show, setShow] = useState(false);\n    const [name, setName] = useState();\n    const [otherCurrency, setOtherCurrency] = useState(false);\n\n    const [editBill, setEditBill] = useState({\n        status: \"\",\n        amount: \"\"\n    });\n\n    const handleClose = () => setShow(false);\n    const handleShow = () => setShow(true);\n\n    const dispatch = useDispatch()\n\n\n    useEffect(() => {\n        if(allUser)\n            setUsers(allUser)\n    }, [allUser])\n\n    const onSubmit = () => {\n        console.log(\"submit bill!\", editBill);\n    }\n\n    \n    const toggleEditDisplay = (input) => {\n        if(editDisplay === \"none\"){\n            setEditBill(input)\n            setEditDisplay(\"display\")\n        }else{\n            setEditDisplay(\"none\")\n        }\n    }\n\n    const togglePayDisplay = () => {\n        if(payDisplay === \"none\"){\n            setPayDisplay(\"display\")\n        }else{\n            setPayDisplay(\"none\")\n        }\n    }\n\n    const bills = [{id: 1, status: \"Cancelled\", amount: 100}, {id: 2, status: \"Paid\", amount: 4321}, {id: 3, status: \"Rejected\", amount: 123}, {id: 4, status: \"Waiting\", amount: 342}, {id: 5, status: \"Overdue\", amount: 32}]\n\n    // const allUser = [{id: 1, username: \"321@gmail.com\", nickname: \"chen\"},{id: 2, username: \"111@gmail.com\", nickname: \"lin\"},{id: 3, username: \"222@gmail.com\", nickname: \"liu\"},{id: 4, username: \"333@gmail.com\", nickname: \"zhang\"}]\n\n    const searchUser = (name) => {\n        console.log(\"search for\", name);\n        setSearch(name)\n        const afterUser = users.filter((a) => a.username.includes(name) || a.nickname.includes(name))\n        let selectedUser = users.filter((a) => a.username.includes(name))\n        selectedUser = selectedUser.filter((a) => a.nickname !== user.nickname)\n\n        console.log(\"afterUser\", selectedUser);\n        setSearchOutput(selectedUser)\n        // afterUser.map((item, index) => {\n        //     selectedUser.push (\n        //         <Card style={{ width: '18rem' }}>\n        //             <Card.Body>\n        //                 <Card.Title>Card Title</Card.Title>\n        //                 <Card.Subtitle className=\"mb-2 text-muted\">Card Subtitle</Card.Subtitle>\n        //                 <Card.Text>\n        //                 Some quick example text to build on the card title and make up the bulk of\n        //                 the card's content.\n        //                 </Card.Text>\n        //                 <Card.Link href=\"#\">Card Link</Card.Link>\n        //                 <Card.Link href=\"#\">Another Link</Card.Link>\n        //             </Card.Body>\n        //         </Card>\n        //     )\n        // })\n        \n    }\n\n    const statusList = ['Cancelled', 'Paid', 'Reject', 'Waiting', 'Overdue']\n    let statusOption = statusList.map((item, index) => {\n        return <option value={item} key={index}>{item}</option>\n    });\n\n    const currencies = ['EUR',  \"USD\", 'GBP', 'INR', 'RMB'];\n\tlet currencyOption = currencies.map((item, index) => {\n\t\treturn (\n\t\t\t<option value={item} key={index}>\n\t\t\t\t{item}\n\t\t\t</option>\n\t\t);\n\t});\n\n    const handleChange = event => {\n        const target = event.target;\n        const value = target.value;\n        const targetname = target.name\n        if(targetname === \"currency\"){\n            console.log(\"inside\");\n            editBill[\"amount\"] = \"\"\n            setOtherCurrency(true)\n        }\n        setEditBill({...editBill, [targetname]: value})\n    }\n\n    const detail = (input) => {\n        console.log(\"getting detail of user\", input);\n        setName(input)\n        setShow(true)\n    }\n\n    const reject = async (id) => {\n        console.log(\"reject\");\n        alert(\"You rejected a bill sent from xxx\")\n        // setEditBill({...editBill, id, status: \"Rejected\"})\n        // await dispatch(updateToBill(editBill))\n    }\n\n    const pay = async (id) => {\n        console.log(\"pay\");\n        togglePayDisplay()\n        // setEditBill({...editBill, id, status: \"Paid\"})  \n        // await dispatch(updateToBill(editBill))\n    }\n\n    const edit = async () => {\n        console.log(\"edit\", editBill);\n        await dispatch(updateToBill(editBill))\n    }\n\n    return (\n        <>\n        <div style={{width: \"60%\", margin: \"0 auto\"}}>\n            <div style={{height: \"100px\"}}>\n                <Form.Group controlId=\"formBasicDescription\">\n                <Form.Label>Send Bill</Form.Label>\n                <Row>\n                <Col>\n                <InputGroup className=\"col-mb-3\">\n                    <InputGroup.Prepend>\n                    <InputGroup.Text>\n                        <FontAwesomeIcon icon={faSearch} />\n                    </InputGroup.Text>\n                    </InputGroup.Prepend>\n                    <FormControl\n                    placeholder=\"Search\"\n                    aria-label=\"Search\"\n                    aria-describedby=\"basic-addon2\"\n                    value={search}\n                    onChange={(e) => searchUser(e.target.value)}\n                    />\n                </InputGroup>\n                <ListGroup style={{zIndex: 10}}>\n                    {console.log(\"before search selectedUser\", search, searchOutput)}\n                    {search && searchOutput\n                    ? searchOutput.map((item, index) => {\n                        if (item.nickname) {\n                            return (\n                            <ListGroup.Item\n                                className=\"search-result\"\n                                action\n                                onClick={() => detail(item.nickname)}\n                                key={index}\n                            >\n                                {item.nickname ? item.nickname : item.username}\n                            </ListGroup.Item>\n                            );\n                        }\n                        })\n                    : null}\n                </ListGroup>\n                </Col>\n            </Row>\n            </Form.Group>\n            </div>\n            <Row className=\"justify-content-center\">\n                <h4>Bills</h4>\n            </Row>\n            <Row>\n                <Table striped bordered hover>\n                    <thead>\n                        <tr>\n                        <th>#</th>\n                        <th>Status</th>\n                        <th>Amount</th>\n                        <th>Edit</th>\n                        <th>Operation</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {bills.map((item, index) => {\n                            return <tr>\n                                    <td>{item.id}</td>\n                                    <td>{item.status}</td>\n                                    <td>{item.amount}</td>\n                                    {item.status !== \"Cancelled\" && item.status !== \"Paid\" && item.status !== \"Rejected\" ? \n                                    <td>\n                                        <Button variant=\"link\" onClick={() => toggleEditDisplay(item)}>Edit</Button>\n                                    </td> : \n                                    <td> \n                                        Cannot Edit\n                                    </td>\n                                    }\n                                    {item.status !== \"Paid\" && item.status !== \"Rejected\" && item.status !==\"Cancelled\" && item.status !== \"Overdue\" ? \n                                    <td>\n                                        <Button variant=\"link\" onClick={() => reject(item.id)}>Reject</Button>\n                                        <Button variant=\"link\" onClick={() => pay(item.id)}>Pay</Button>\n                                    </td> : \n                                    <td> \n                                        None Action\n                                    </td>\n                                    }\n                                </tr>\n                        })}\n                    </tbody>\n                </Table>\n            </Row>\n            <Modal show={show} onHide={handleClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Send Bills</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <Bill value={name}/>\n                </Modal.Body>\n        </Modal>\n        <Application.Base display = {editDisplay}>\n                <Application.Close toggleDisplay={toggleEditDisplay}><FontAwesomeIcon icon={faTimes} /></Application.Close>\n                <h6>Edit Bill</h6>\n                {console.log(\"editBill\",editBill)}\n                    <div className=\"form-group\">\n                    <label htmlFor=\"status\">Bill Status</label>\n                        <select\n                            name=\"status\"\n                            id=\"status\"\n                            value={editBill.status}\n                            className=\"form-control\"\n                            onChange={handleChange}>\n                            {statusOption}\n                        </select>\n                    </div>\n                    <Form.Group controlId=\"formBasicDate\">\n                        <Form.Label>Bill Amount: </Form.Label>\n                        <Form.Control value={editBill.amount} onChange={(e) => setEditBill({ ...editBill, amount: e.target.value })}type=\"text\" placeholder=\"\" />\n                    </Form.Group>\n                    <Button variant=\"primary\" onClick={edit}>Edit</Button>\n            </Application.Base>\n            <Application.Base display = {payDisplay}>\n                <Application.Close toggleDisplay={togglePayDisplay}><FontAwesomeIcon icon={faTimes} /></Application.Close>\n                <h6>Pay a bill</h6>\n                <div className=\"form-group\">\n                    <label htmlFor=\"currency\">Bill Currency</label>\n                        <select\n                            name=\"currency\"\n                            id=\"currency\"\n                            value={editBill.currency}\n                            className=\"form-control\"\n                            onChange={handleChange}>\n                            {currencyOption}\n                        </select>\n                    </div>\n                    <Form.Group controlId=\"formBasicDate\" >\n                        <Form.Label>Bill Amount: </Form.Label>\n                        <Form.Control value={editBill.amount} onChange={(e) => setEditBill({ ...editBill, amount: e.target.value })}type=\"text\" placeholder=\"\" />\n                    </Form.Group>\n                    {otherCurrency ? <Form.Label>Fee: </Form.Label> : null}<br />\n                    <Button variant=\"primary\" onClick={edit}>Edit</Button>\n            </Application.Base>\n        </div>\n        </>\n    )\n}\n\nexport default Bills\n"]},"metadata":{},"sourceType":"module"}