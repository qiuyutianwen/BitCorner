{"ast":null,"code":"var _jsxFileName = \"/Users/qiuyutianwen/Documents/GitHub/BitCorner/frontend/src/pages/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Button, Form, Col, Row, Table } from 'react-bootstrap';\nimport { faPen, faTimes } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Application from '../components/application/applicaiton';\nimport { useDispatch, useSelector } from 'react-redux';\nimport FileBase from 'react-file-base64';\nimport logo from '../images/signup.png';\nimport { update, updateBalance } from '../actions/authActions';\nimport { getUsers } from '../actions/authActions';\nimport { USD_RMB, USD_EUR, USD_GBP, USD_INR, BIT_USD } from '../constants/constant';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const user = useSelector(state => state.auth ? state.auth.user : null);\n  const allBalance = useSelector(state => state.auth ? state.auth.balance : null);\n  const [balance, setBalance] = useState();\n  const [bitCoin, setBitCoin] = useState();\n  useEffect(() => {\n    if (allBalance) setBalance(allBalance);\n  }, [allBalance]);\n  const dispatch = useDispatch();\n  const [balanceInfo, setBalanceInfo] = useState({\n    username: user.username,\n    currency: user.bank ? user.bank.currency.toUpperCase() : \"EUR\",\n    operation: \"deposit\",\n    amount: \"\"\n  }); // const onSubmit = async (e) => {\n  //     e.preventDefault();\n  //     console.log(\"balanceInfo\", balanceInfo);\n  //     console.log(\"submit bank\");\n  //     // const addBank = {bank: bankInfo, address: addressInfo}\n  //     // dispatch(addBank(bankInfo))\n  // }\n\n  const currencies = [\"EUR\", \"USD\", \"GBP\", \"INR\", \"CNY\"];\n  let currencyOption = currencies.map((item, index) => {\n    return /*#__PURE__*/_jsxDEV(\"option\", {\n      value: item,\n      children: item\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 16\n    }, this);\n  });\n\n  const handleChange = event => {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    setBalanceInfo({ ...balanceInfo,\n      currency: value\n    });\n  };\n\n  const action = async input => {\n    balanceInfo[\"operation\"] = input;\n    console.log(\"balanceInfo\", balanceInfo, input);\n\n    if (balanceInfo.amount.match(\"^[0-9]*\\.[0-9]{2}$\") != null) {\n      await dispatch(updateBalance(balanceInfo));\n      setBalanceInfo({ ...balanceInfo,\n        operation: \"\",\n        amount: \"\"\n      });\n    } else {\n      alert(\"Cannot operate this amount of currency\");\n    }\n  };\n\n  const actionWithBit = async input => {\n    balanceInfo[\"operation\"] = input;\n    let initializeCurrency = balanceInfo.currency;\n    balanceInfo[\"currency\"] = \"Btc\";\n    console.log(\"balanceInfo\", balanceInfo, input);\n\n    if (bitCoin.match(\"^[0-9]*\\.[0-9]{8}$\") != null) {\n      await dispatch(updateBalance({ ...balanceInfo,\n        amount: bitCoin\n      }));\n      balanceInfo['currency'] = initializeCurrency;\n      setBitCoin(\"\");\n    } else {\n      alert(\"Cannot operate this amount of bitcoin\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"60%\",\n        margin: \"0 auto\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"User Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        children: [\"Default Currency: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: user.bank ? user.bank.currency : \"NONE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 35\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"50%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"currency\",\n                children: \"Currency\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"currency\",\n                id: \"currency\",\n                value: balanceInfo.currency,\n                className: \"form-control\",\n                onChange: handleChange,\n                children: currencyOption\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(Form.Group, {\n              controlId: \"formAmount\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                value: balanceInfo.amount,\n                onChange: e => setBalanceInfo({ ...balanceInfo,\n                  amount: e.target.value\n                }),\n                type: \"number\",\n                required: true,\n                presicion: 2,\n                min: \"0.00\",\n                step: \"0.01\",\n                pattern: \"^[0-9]*\\\\.[0-9]{2}$\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          value: \"withdraw\",\n          onClick: e => action(e.target.value),\n          children: \"Withdraw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          value: \"deposit\",\n          onClick: e => action(e.target.value),\n          style: {\n            marginLeft: \"10px\"\n          },\n          children: \"Deposit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: [\"BitCoin Balance: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: balance && balance.btc ? balance.btc : 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"formBitcoin\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"BitCoin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            value: bitCoin,\n            onChange: e => setBitCoin(e.target.value),\n            type: \"number\",\n            required: true,\n            presicion: 8,\n            min: \"0.00\",\n            step: \"0.00000001\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          value: \"withdraw\",\n          onClick: e => actionWithBit(e.target.value),\n          children: \"Withdraw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          value: \"deposit\",\n          onClick: e => actionWithBit(e.target.value),\n          style: {\n            marginLeft: \"10px\"\n          },\n          children: \"Deposit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        children: \"Bank Account Balance In Different Currency Type:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Currency\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Balance\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"USD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: balance && balance.usd ? balance.usd : 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"CNY\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: balance && balance.cny ? balance.cny : 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"INR\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: balance && balance.inr ? balance.inr : 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"EUR\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: balance && balance.eur ? balance.eur : 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"GBP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: balance && balance.gbp ? balance.gbp : 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"BitCoin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: balance && balance.btc ? balance.btc : 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(Profile, \"jWtfDdY3grrvuxLACsqpEkKc1ds=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/qiuyutianwen/Documents/GitHub/BitCorner/frontend/src/pages/Profile.js"],"names":["React","useEffect","useState","Button","Form","Col","Row","Table","faPen","faTimes","FontAwesomeIcon","Application","useDispatch","useSelector","FileBase","logo","update","updateBalance","getUsers","USD_RMB","USD_EUR","USD_GBP","USD_INR","BIT_USD","Profile","user","state","auth","allBalance","balance","setBalance","bitCoin","setBitCoin","dispatch","balanceInfo","setBalanceInfo","username","currency","bank","toUpperCase","operation","amount","currencies","currencyOption","map","item","index","handleChange","event","target","value","type","checked","action","input","console","log","match","alert","actionWithBit","initializeCurrency","width","margin","e","marginLeft","btc","usd","cny","inr","eur","gbp"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport { Button, Form, Col, Row, Table } from 'react-bootstrap';\nimport { faPen, faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport Application from '../components/application/applicaiton'\nimport { useDispatch, useSelector } from 'react-redux';\nimport FileBase from 'react-file-base64';\nimport logo from '../images/signup.png'\nimport {update, updateBalance} from '../actions/authActions'\nimport { getUsers } from '../actions/authActions'\nimport {USD_RMB, USD_EUR, USD_GBP, USD_INR, BIT_USD} from '../constants/constant'\n\nconst Profile = () => {\n    const user = useSelector((state) => state.auth ? state.auth.user : null)\n    const allBalance = useSelector((state) => state.auth ? state.auth.balance : null)\n    const [balance, setBalance] = useState()\n    const [bitCoin, setBitCoin] = useState()\n\n    useEffect(() => {\n        if(allBalance)\n            setBalance(allBalance)\n    }, [allBalance])\n\n    const dispatch = useDispatch()\n\n    const [balanceInfo, setBalanceInfo] = useState({\n        username: user.username,\n        currency: user.bank? user.bank.currency.toUpperCase() : \"EUR\",\n        operation: \"deposit\",\n        amount: \"\"\n    })\n\n    // const onSubmit = async (e) => {\n    //     e.preventDefault();\n    //     console.log(\"balanceInfo\", balanceInfo);\n    //     console.log(\"submit bank\");\n    //     // const addBank = {bank: bankInfo, address: addressInfo}\n    //     // dispatch(addBank(bankInfo))\n    // }\n\n    const currencies = [\"EUR\", \"USD\", \"GBP\", \"INR\", \"CNY\"]\n    let currencyOption = currencies.map((item, index) => {\n        return <option value={item} key={index}>{item}</option>\n    });\n\n    const handleChange = event => {\n        const target = event.target;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        setBalanceInfo({...balanceInfo, currency: value})\n    }\n\n    const action = async (input) => {\n        balanceInfo[\"operation\"] = input\n        console.log(\"balanceInfo\", balanceInfo, input);\n        if(balanceInfo.amount.match(\"^[0-9]*\\.[0-9]{2}$\")!=null) {\n            await dispatch(updateBalance(balanceInfo))\n            setBalanceInfo({...balanceInfo, operation: \"\", amount: \"\"})\n        }else{\n            alert(\"Cannot operate this amount of currency\")\n        }\n    } \n\n    const actionWithBit = async (input) => {\n        balanceInfo[\"operation\"] = input\n        let initializeCurrency = balanceInfo.currency\n        balanceInfo[\"currency\"] = \"Btc\"\n        console.log(\"balanceInfo\", balanceInfo, input);\n        if(bitCoin.match(\"^[0-9]*\\.[0-9]{8}$\")!=null) {\n            await dispatch(updateBalance({...balanceInfo, amount: bitCoin}))\n            balanceInfo['currency'] = initializeCurrency\n            setBitCoin(\"\")\n        }else{\n            alert(\"Cannot operate this amount of bitcoin\")\n        }\n    } \n\n    \n\n    return (\n        <>\n        <div style={{width: \"60%\", margin: \"0 auto\"}}>\n            <Row className=\"justify-content-center\">\n                <h4>User Profile</h4>\n            </Row>\n            <h6>Default Currency: <strong>{user.bank? user.bank.currency : \"NONE\"}</strong></h6>\n            {/* <h6>Bank Account Balance: <strong>{balance ? balance.}</strong></h6> */}\n            \n            <div style={{width: \"50%\"}}>\n                <Row>\n                    <Col>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"currency\">Currency</label>\n                        <select\n                            name=\"currency\"\n                            id=\"currency\"\n                            value={balanceInfo.currency}\n                            className=\"form-control\"\n                            onChange={handleChange}>\n                            {currencyOption}\n                        </select>\n                    </div>\n                    </Col>\n                    <Col>\n                    <Form.Group controlId=\"formAmount\">\n                        <Form.Label>Amount</Form.Label>\n                        <Form.Control value={balanceInfo.amount} onChange={(e) => setBalanceInfo({ ...balanceInfo, amount: e.target.value })} type=\"number\" required presicion={2} min=\"0.00\" step=\"0.01\" pattern=\"^[0-9]*\\.[0-9]{2}$\"/>\n                    </Form.Group>\n                    </Col>\n                </Row>\n                <Button variant=\"primary\" value=\"withdraw\" onClick={(e) => action(e.target.value)}>\n                    Withdraw\n                </Button>\n                <Button variant=\"danger\" value=\"deposit\" onClick={(e) => action(e.target.value)} style={{marginLeft: \"10px\"}}>\n                    Deposit\n                </Button>\n                <h6>BitCoin Balance: <strong>{balance && balance.btc ? balance.btc : 0}</strong></h6>\n                <Form.Group controlId=\"formBitcoin\">\n                    <Form.Label>BitCoin</Form.Label>\n                    <Form.Control value={bitCoin} onChange={(e) => setBitCoin(e.target.value)} type=\"number\" required presicion={8} min=\"0.00\" step=\"0.00000001\"/>\n                </Form.Group>\n                <Button variant=\"primary\" value=\"withdraw\" onClick={(e) => actionWithBit(e.target.value)}>\n                    Withdraw\n                </Button>\n                <Button variant=\"danger\" value=\"deposit\" onClick={(e) => actionWithBit(e.target.value)} style={{marginLeft: \"10px\"}}>\n                    Deposit\n                </Button>\n            </div>\n            <p></p>\n            <h6>Bank Account Balance In Different Currency Type:</h6>\n            <Row>\n                <Table striped bordered hover>\n                    <thead>\n                        <tr>\n                        <th>Currency</th>\n                        <th>Balance</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>USD</td>\n                            <td>{balance && balance.usd ? balance.usd : 0}</td>\n                        </tr>\n                        <tr>\n                            <td>CNY</td>\n                            <td>{balance && balance.cny ? balance.cny : 0}</td>\n                        </tr>\n                        <tr>\n                            <td>INR</td>\n                            <td>{balance && balance.inr ? balance.inr : 0}</td>\n                        </tr>\n                        <tr>\n                            <td>EUR</td>\n                            <td>{balance && balance.eur ? balance.eur : 0}</td>\n                        </tr>\n                        <tr>\n                            <td>GBP</td>\n                            <td>{balance && balance.gbp ? balance.gbp : 0}</td>\n                        </tr>\n                        <tr>\n                            <td>BitCoin</td>\n                            <td>{balance && balance.btc ? balance.btc : 0}</td>\n                        </tr>\n                    </tbody>\n                </Table>\n            </Row>\n        </div>\n        </>\n    )\n}\n\nexport default Profile"]},"metadata":{},"sourceType":"module"}